<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="879px" preserveAspectRatio="none" style="width:540px;height:879px;background:#FFFFFF;" version="1.1" viewBox="0 0 540 879" width="540px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="225" x="158.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="215" x="163.5" y="27.9951">Matching Mmr System : 매칭</text><rect fill="#FFFFFF" height="659.7422" style="stroke:#181818;stroke-width:1.0;" width="10" x="171.5" y="128.5938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="419.5" y="178.8594"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="491.5" y="237.125"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="395.5" x="137.5" y="281.2578"/><rect fill="none" height="262.5391" style="stroke:#000000;stroke-width:1.5;" width="405.5" x="127.5" y="385.4609"/><rect fill="none" height="116.2031" style="stroke:#000000;stroke-width:1.5;" width="270" x="137.5" y="524.7969"/><rect fill="none" height="119.3359" style="stroke:#000000;stroke-width:1.5;" width="523" x="10" y="662"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="42" x2="42" y1="118.5938" y2="798.3359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="176.5" x2="176.5" y1="118.5938" y2="798.3359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="424" x2="424" y1="118.5938" y2="798.3359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="496" x2="496" y1="118.5938" y2="798.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="20" y="115.292">Client</text><ellipse cx="42.5" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M42.5,58.7969 L42.5,85.7969 M29.5,66.7969 L55.5,66.7969 M42.5,85.7969 L29.5,100.7969 M42.5,85.7969 L55.5,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="20" y="810.3311">Client</text><ellipse cx="42.5" cy="822.1328" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M42.5,830.1328 L42.5,857.1328 M29.5,838.1328 L55.5,838.1328 M42.5,857.1328 L29.5,872.1328 M42.5,857.1328 L55.5,872.1328 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="58" x="147.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="154.5" y="107.292">Server</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="58" x="147.5" y="797.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="154.5" y="817.3311">Server</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="389" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="396" y="107.292">MariaDB</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="389" y="797.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="396" y="817.3311">MariaDB</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="470" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="477" y="107.292">Redis</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="470" y="797.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="477" y="817.3311">Redis</text><rect fill="#FFFFFF" height="659.7422" style="stroke:#181818;stroke-width:1.0;" width="10" x="171.5" y="128.5938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="419.5" y="178.8594"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="491.5" y="237.125"/><polygon fill="#181818" points="159.5,145.7266,169.5,149.7266,159.5,153.7266,163.5,149.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="42.5" x2="165.5" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="49.5" y="144.6606">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="62.5" y="144.6606">회원 시퀀스 전달</text><polygon fill="#181818" points="407.5,174.8594,417.5,178.8594,407.5,182.8594,411.5,178.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="413.5" y1="178.8594" y2="178.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="188.5" y="173.7935">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="201.5" y="173.7935">회원 정보 및 SETTING 정보 조회</text><polygon fill="#181818" points="192.5,203.9922,182.5,207.9922,192.5,211.9922,188.5,207.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="186.5" x2="423.5" y1="207.9922" y2="207.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="198.5" y="202.9263">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="211.5" y="202.9263">회원 정보 및 SETTING 정보 전달</text><polygon fill="#181818" points="479.5,233.125,489.5,237.125,479.5,241.125,483.5,237.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="485.5" y1="237.125" y2="237.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="188.5" y="232.0591">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="201.5" y="232.0591">전체 teamList 조회</text><polygon fill="#181818" points="192.5,262.2578,182.5,266.2578,192.5,270.2578,188.5,266.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="186.5" x2="495.5" y1="266.2578" y2="266.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="198.5" y="261.1919">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="211.5" y="261.1919">전체 teamList 전달</text><path d="M137.5,281.2578 L201.5,281.2578 L201.5,288.3906 L191.5,298.3906 L137.5,298.3906 L137.5,281.2578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="395.5" x="137.5" y="281.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="152.5" y="294.3247">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="221" x="216.5" y="293.4683">[회원의 mmr 수치와 일치하는 팀이 있는 경우]</text><polygon fill="#181818" points="484.5,315.5234,494.5,319.5234,484.5,323.5234,488.5,319.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="490.5" y1="319.5234" y2="319.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="188.5" y="314.4575">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="201.5" y="314.4575">해당 팀에 회원 정보 추가</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="137.5" x2="533" y1="328.5234" y2="328.5234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="122" x="142.5" y="338.7339">[일치하는 팀이 없는 경우]</text><polygon fill="#181818" points="484.5,359.4609,494.5,363.4609,484.5,367.4609,488.5,363.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="490.5" y1="363.4609" y2="363.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="188.5" y="358.395">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="201.5" y="358.395">새로운 팀 생성해서 회원 정보 추가</text><path d="M127.5,385.4609 L191.5,385.4609 L191.5,392.5938 L181.5,402.5938 L127.5,402.5938 L127.5,385.4609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="262.5391" style="stroke:#000000;stroke-width:1.5;" width="405.5" x="127.5" y="385.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="142.5" y="398.5278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="144" x="206.5" y="397.6714">[매칭 시간이 1시간 넘은 경우]</text><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="223.5" y1="423.7266" y2="423.7266"/><line style="stroke:#181818;stroke-width:1.0;" x1="223.5" x2="223.5" y1="423.7266" y2="436.7266"/><line style="stroke:#181818;stroke-width:1.0;" x1="182.5" x2="223.5" y1="436.7266" y2="436.7266"/><polygon fill="#181818" points="192.5,432.7266,182.5,436.7266,192.5,440.7266,188.5,436.7266" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="188.5" y="418.6606">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="201.5" y="418.6606">매칭 실패 메세지 "auto_cancel" 생성</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="127.5" x2="533" y1="445.7266" y2="445.7266"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="178" x="132.5" y="455.937">[매칭 시간이 1시간이 넘지 않은 경우]</text><polygon fill="#181818" points="484.5,476.6641,494.5,480.6641,484.5,484.6641,488.5,480.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="490.5" y1="480.6641" y2="480.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="188.5" y="475.5981">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="201.5" y="475.5981">회원 팀 정보 조회</text><polygon fill="#181818" points="192.5,505.7969,182.5,509.7969,192.5,513.7969,188.5,509.7969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="186.5" x2="495.5" y1="509.7969" y2="509.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="198.5" y="504.731">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="220.5" y="504.731">회원 팀 정보 전달</text><path d="M137.5,524.7969 L201.5,524.7969 L201.5,531.9297 L191.5,541.9297 L137.5,541.9297 L137.5,524.7969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="116.2031" style="stroke:#000000;stroke-width:1.5;" width="270" x="137.5" y="524.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="152.5" y="537.8638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="152" x="216.5" y="537.0073">[회원이 매칭을 중도 취소한경우]</text><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="223.5" y1="563.0625" y2="563.0625"/><line style="stroke:#181818;stroke-width:1.0;" x1="223.5" x2="223.5" y1="563.0625" y2="576.0625"/><line style="stroke:#181818;stroke-width:1.0;" x1="182.5" x2="223.5" y1="576.0625" y2="576.0625"/><polygon fill="#181818" points="192.5,572.0625,182.5,576.0625,192.5,580.0625,188.5,576.0625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="188.5" y="557.9966">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="210.5" y="557.9966">매칭 취소 메세지 "cancel" 생성</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="137.5" x2="407.5" y1="585.0625" y2="585.0625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="92" x="142.5" y="595.2729">[정원이 다 찬 경우]</text><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="223.5" y1="620" y2="620"/><line style="stroke:#181818;stroke-width:1.0;" x1="223.5" x2="223.5" y1="620" y2="633"/><line style="stroke:#181818;stroke-width:1.0;" x1="182.5" x2="223.5" y1="633" y2="633"/><polygon fill="#181818" points="192.5,629,182.5,633,192.5,637,188.5,633" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="188.5" y="614.9341">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="210.5" y="614.9341">매칭 성공 메세지 "success" 생성</text><path d="M10,662 L74,662 L74,669.1328 L64,679.1328 L10,679.1328 L10,662 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="119.3359" style="stroke:#000000;stroke-width:1.5;" width="523" x="10" y="662"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="675.0669">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="155" x="89" y="674.2104">[메세지가 "success" 일 경우]</text><polygon fill="#181818" points="484.5,696.2656,494.5,700.2656,484.5,704.2656,488.5,700.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="490.5" y1="700.2656" y2="700.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="188.5" y="695.1997">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="210.5" y="695.1997">acceptTime에 동의 시간 추가</text><polygon fill="#181818" points="53.5,725.3984,43.5,729.3984,53.5,733.3984,49.5,729.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="47.5" x2="170.5" y1="729.3984" y2="729.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="59.5" y="724.3325">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="81.5" y="724.3325">메세지 전달</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="533" y1="738.3984" y2="738.3984"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="165" x="15" y="748.6089">[메세지가 "success" 아닐 경우]</text><polygon fill="#181818" points="53.5,769.3359,43.5,773.3359,53.5,777.3359,49.5,773.3359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="47.5" x2="170.5" y1="773.3359" y2="773.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="59.5" y="768.27">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="81.5" y="768.27">메세지 전달</text><!--MD5=[132d1e25d104cd7ffc5520441705ecf7]
@startuml
autonumber

title Matching Mmr System : 매칭
actor Client

activate Server
Client -> Server : 회원 시퀀스 전달

Server -> MariaDB : 회원 정보 및 SETTING 정보 조회

activate MariaDB
MariaDB -> Server : 회원 정보 및 SETTING 정보 전달
deactivate MariaDB

Server -> Redis : 전체 teamList 조회

activate Redis
Redis -> Server : 전체 teamList 전달
deactivate Redis

alt 회원의 mmr 수치와 일치하는 팀이 있는 경우
Server -> Redis : 해당 팀에 회원 정보 추가
else 일치하는 팀이 없는 경우
Server -> Redis : 새로운 팀 생성해서 회원 정보 추가
end

alt 매칭 시간이 1시간 넘은 경우
  Server -> Server : 매칭 실패 메세지 "auto_cancel" 생성

else 매칭 시간이 1시간이 넘지 않은 경우
  Server -> Redis : 회원 팀 정보 조회
  Redis -> Server : 회원 팀 정보 전달

    alt 회원이 매칭을 중도 취소한경우 
      Server -> Server : 매칭 취소 메세지 "cancel" 생성
  
    else 정원이 다 찬 경우
      Server -> Server : 매칭 성공 메세지 "success" 생성 
    end
end

alt 메세지가 "success" 일 경우
  Server -> Redis : acceptTime에 동의 시간 추가
  Server -> Client : 메세지 전달
else 메세지가 "success" 아닐 경우
  Server -> Client : 메세지 전달
end
deactivate Server
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>