<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="972px" preserveAspectRatio="none" style="width:632px;height:972px;background:#FFFFFF;" version="1.1" viewBox="0 0 632 972" width="632px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="285" x="174.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="275" x="179.5" y="27.9951">Matching Position System : 매칭 수락</text><rect fill="#FFFFFF" height="744.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="171.5" y="128.5938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="481.5" y="178.8594"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="553.5" y="237.125"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="553.5" y="609.1953"/><rect fill="none" height="207.6016" style="stroke:#000000;stroke-width:1.5;" width="477.5" x="117.5" y="281.2578"/><rect fill="none" height="147.3359" style="stroke:#000000;stroke-width:1.5;" width="369" x="127.5" y="334.5234"/><rect fill="none" height="116.2031" style="stroke:#000000;stroke-width:1.5;" width="349" x="137.5" y="358.6563"/><rect fill="none" height="342.2656" style="stroke:#000000;stroke-width:1.5;" width="615" x="10" y="502.8594"/><rect fill="none" height="225.0625" style="stroke:#000000;stroke-width:1.5;" width="497.5" x="117.5" y="570.9297"/><rect fill="none" height="106.5313" style="stroke:#000000;stroke-width:1.5;" width="477.5" x="127.5" y="653.3281"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="457.5" x="137.5" y="677.4609"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="42" x2="42" y1="118.5938" y2="891.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="176.5" x2="176.5" y1="118.5938" y2="891.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="486" x2="486" y1="118.5938" y2="891.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="558" x2="558" y1="118.5938" y2="891.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="20" y="115.292">Client</text><ellipse cx="42.5" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M42.5,58.7969 L42.5,85.7969 M29.5,66.7969 L55.5,66.7969 M42.5,85.7969 L29.5,100.7969 M42.5,85.7969 L55.5,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="20" y="903.2529">Client</text><ellipse cx="42.5" cy="915.0547" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M42.5,923.0547 L42.5,950.0547 M29.5,931.0547 L55.5,931.0547 M42.5,950.0547 L29.5,965.0547 M42.5,950.0547 L55.5,965.0547 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="58" x="147.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="154.5" y="107.292">Server</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="58" x="147.5" y="890.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="154.5" y="910.2529">Server</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="451" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="458" y="107.292">MariaDB</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="451" y="890.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="458" y="910.2529">MariaDB</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="532" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="539" y="107.292">Redis</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="532" y="890.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="539" y="910.2529">Redis</text><rect fill="#FFFFFF" height="744.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="171.5" y="128.5938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="481.5" y="178.8594"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="553.5" y="237.125"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="553.5" y="609.1953"/><polygon fill="#181818" points="159.5,145.7266,169.5,149.7266,159.5,153.7266,163.5,149.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="42.5" x2="165.5" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="49.5" y="144.6606">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="62.5" y="144.6606">회원 시퀀스 전달</text><polygon fill="#181818" points="469.5,174.8594,479.5,178.8594,469.5,182.8594,473.5,178.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="475.5" y1="178.8594" y2="178.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="188.5" y="173.7935">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="201.5" y="173.7935">SETTING 정보 조회</text><polygon fill="#181818" points="192.5,203.9922,182.5,207.9922,192.5,211.9922,188.5,207.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="186.5" x2="485.5" y1="207.9922" y2="207.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="198.5" y="202.9263">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="211.5" y="202.9263">SETTING 정보 전달</text><polygon fill="#181818" points="541.5,233.125,551.5,237.125,541.5,241.125,545.5,237.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="547.5" y1="237.125" y2="237.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="188.5" y="232.0591">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="201.5" y="232.0591">회원 정보 및 acceptTime 팀 수락 시간 조회</text><polygon fill="#181818" points="192.5,262.2578,182.5,266.2578,192.5,270.2578,188.5,266.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="186.5" x2="557.5" y1="266.2578" y2="266.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="198.5" y="261.1919">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="211.5" y="261.1919">회원 정보 및 acceptTime 팀 수락 시간 전달</text><path d="M117.5,281.2578 L187.5,281.2578 L187.5,288.3906 L177.5,298.3906 L117.5,298.3906 L117.5,281.2578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="207.6016" style="stroke:#000000;stroke-width:1.5;" width="477.5" x="117.5" y="281.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="132.5" y="294.3247">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="155" x="202.5" y="293.4683">[수락시간 &gt; 유저가 수락한 시간]</text><polygon fill="#181818" points="546.5,315.5234,556.5,319.5234,546.5,323.5234,550.5,319.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="552.5" y1="319.5234" y2="319.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="188.5" y="314.4575">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="201.5" y="314.4575">accept에 수락한 회원 정보 추가</text><path d="M127.5,334.5234 L204.5,334.5234 L204.5,341.6563 L194.5,351.6563 L127.5,351.6563 L127.5,334.5234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="147.3359" style="stroke:#000000;stroke-width:1.5;" width="369" x="127.5" y="334.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="142.5" y="347.5903">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="253" x="219.5" y="346.7339">[수락 시간 &gt; 유저가 수락한 시간 || 메세지 없을 경우]</text><path d="M137.5,358.6563 L201.5,358.6563 L201.5,365.7891 L191.5,375.7891 L137.5,375.7891 L137.5,358.6563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="116.2031" style="stroke:#000000;stroke-width:1.5;" width="349" x="137.5" y="358.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="152.5" y="371.7231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="159" x="216.5" y="370.8667">[수락 시간 &lt; 유저가 수락한 시간]</text><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="223.5" y1="396.9219" y2="396.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="223.5" x2="223.5" y1="396.9219" y2="409.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="182.5" x2="223.5" y1="409.9219" y2="409.9219"/><polygon fill="#181818" points="192.5,405.9219,182.5,409.9219,192.5,413.9219,188.5,409.9219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="188.5" y="391.856">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="201.5" y="391.856">반복문 탈출</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="137.5" x2="486.5" y1="418.9219" y2="418.9219"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="183" x="142.5" y="429.1323">[accept에 수락한 정원이 다 찬 경우]</text><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="223.5" y1="453.8594" y2="453.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="223.5" x2="223.5" y1="453.8594" y2="466.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="182.5" x2="223.5" y1="466.8594" y2="466.8594"/><polygon fill="#181818" points="192.5,462.8594,182.5,466.8594,192.5,470.8594,188.5,466.8594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="188.5" y="448.7935">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273" x="201.5" y="448.7935">"success" 메세지 생성 및 팀 나눈 후 반복문 탈출</text><path d="M10,502.8594 L74,502.8594 L74,509.9922 L64,519.9922 L10,519.9922 L10,502.8594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="342.2656" style="stroke:#000000;stroke-width:1.5;" width="615" x="10" y="502.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="515.9263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="155" x="89" y="515.0698">[메세지가 "success" 일 경우]</text><polygon fill="#181818" points="53.5,537.125,43.5,541.125,53.5,545.125,49.5,541.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="47.5" x2="170.5" y1="541.125" y2="541.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="59.5" y="536.0591">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="72.5" y="536.0591">메세지 전달</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="625" y1="550.125" y2="550.125"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="98" x="15" y="560.3354">[메세지가 없을 경우]</text><path d="M117.5,570.9297 L187.5,570.9297 L187.5,578.0625 L177.5,588.0625 L117.5,588.0625 L117.5,570.9297 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="225.0625" style="stroke:#000000;stroke-width:1.5;" width="497.5" x="117.5" y="570.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="132.5" y="583.9966">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="142" x="202.5" y="583.1401">[마지막에 수락한 회원일 경우]</text><polygon fill="#181818" points="541.5,605.1953,551.5,609.1953,541.5,613.1953,545.5,609.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="547.5" y1="609.1953" y2="609.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="188.5" y="604.1294">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="210.5" y="604.1294">match에 해당 팀 정보 요청</text><polygon fill="#181818" points="192.5,634.3281,182.5,638.3281,192.5,642.3281,188.5,638.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="186.5" x2="557.5" y1="638.3281" y2="638.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="198.5" y="633.2622">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="220.5" y="633.2622">match에 해당 팀 정보 전달</text><path d="M127.5,653.3281 L204.5,653.3281 L204.5,660.4609 L194.5,670.4609 L127.5,670.4609 L127.5,653.3281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="106.5313" style="stroke:#000000;stroke-width:1.5;" width="477.5" x="127.5" y="653.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="142.5" y="666.395">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="109" x="219.5" y="665.5386">[N &lt; match 사이즈]</text><path d="M137.5,677.4609 L207.5,677.4609 L207.5,684.5938 L197.5,694.5938 L137.5,694.5938 L137.5,677.4609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="457.5" x="137.5" y="677.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="152.5" y="690.5278">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="242" x="222.5" y="689.6714">[match에 있지만 accept에는 없는 회원일 경우]</text><polygon fill="#181818" points="546.5,711.7266,556.5,715.7266,546.5,719.7266,550.5,715.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="552.5" y1="715.7266" y2="715.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="188.5" y="710.6606">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="210.5" y="710.6606">position에 해당 회원 정보 삭제</text><polygon fill="#181818" points="546.5,740.8594,556.5,744.8594,546.5,748.8594,550.5,744.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="552.5" y1="744.8594" y2="744.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="188.5" y="739.7935">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241" x="210.5" y="739.7935">match 및 matchAll에 해당 회원 정보 삭제</text><polygon fill="#181818" points="546.5,783.9922,556.5,787.9922,546.5,791.9922,550.5,787.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="181.5" x2="552.5" y1="787.9922" y2="787.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="188.5" y="782.9263">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="329" x="210.5" y="782.9263">accept 팀정보 삭제 및 acceptTime 팀 수락시간 정보 삭제</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="181.5" x2="223.5" y1="824.125" y2="824.125"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="223.5" x2="223.5" y1="824.125" y2="837.125"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="182.5" x2="223.5" y1="837.125" y2="837.125"/><polygon fill="#181818" points="192.5,833.125,182.5,837.125,192.5,841.125,188.5,837.125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="188.5" y="819.0591">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="210.5" y="819.0591">fail 메세지 생성</text><polygon fill="#181818" points="53.5,869.2578,43.5,873.2578,53.5,877.2578,49.5,873.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="47.5" x2="175.5" y1="873.2578" y2="873.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="59.5" y="868.1919">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="81.5" y="868.1919">메세지 전달</text><!--MD5=[7b17c902cb457cfecda1fb8cb6b7c0ce]
@startuml
autonumber

title Matching Position System : 매칭 수락
actor Client

activate Server
Client -> Server : 회원 시퀀스 전달

Server -> MariaDB : SETTING 정보 조회

activate MariaDB
MariaDB -> Server : SETTING 정보 전달
deactivate MariaDB

Server -> Redis : 회원 정보 및 acceptTime 팀 수락 시간 조회

activate Redis
Redis -> Server : 회원 정보 및 acceptTime 팀 수락 시간 전달
deactivate Redis

opt 수락시간 > 유저가 수락한 시간
Server -> Redis : accept에 수락한 회원 정보 추가

  loop 수락 시간 > 유저가 수락한 시간 || 메세지 없을 경우
    alt 수락 시간 < 유저가 수락한 시간
    Server -> Server : 반복문 탈출

    else accept에 수락한 정원이 다 찬 경우
    Server -> Server : "success" 메세지 생성 및 팀 나눈 후 반복문 탈출
    end
  end
end

alt 메세지가 "success" 일 경우
Server -> Client : 메세지 전달
else 메세지가 없을 경우
  opt 마지막에 수락한 회원일 경우
  Server -> Redis : match에 해당 팀 정보 요청
  activate Redis
  Redis -> Server : match에 해당 팀 정보 전달
  deactivate Redis
    loop N < match 사이즈
      opt match에 있지만 accept에는 없는 회원일 경우
        'opt SETTING TYPE가 position이거나 all일 경우
          Server -> Redis : position에 해당 회원 정보 삭제
        'end
        Server -> Redis : match 및 matchAll에 해당 회원 정보 삭제
      end
    end
  Server -> Redis : accept 팀정보 삭제 및 acceptTime 팀 수락시간 정보 삭제
  end
  Server - -> Server : fail 메세지 생성
end

Server -> Client : 메세지 전달
deactivate Server
@enduml

@startuml
autonumber

title Matching Position System : 매칭 수락
actor Client

activate Server
Client -> Server : 회원 시퀀스 전달

Server -> MariaDB : SETTING 정보 조회

activate MariaDB
MariaDB -> Server : SETTING 정보 전달
deactivate MariaDB

Server -> Redis : 회원 정보 및 acceptTime 팀 수락 시간 조회

activate Redis
Redis -> Server : 회원 정보 및 acceptTime 팀 수락 시간 전달
deactivate Redis

opt 수락시간 > 유저가 수락한 시간
Server -> Redis : accept에 수락한 회원 정보 추가

  loop 수락 시간 > 유저가 수락한 시간 || 메세지 없을 경우
    alt 수락 시간 < 유저가 수락한 시간
    Server -> Server : 반복문 탈출

    else accept에 수락한 정원이 다 찬 경우
    Server -> Server : "success" 메세지 생성 및 팀 나눈 후 반복문 탈출
    end
  end
end

alt 메세지가 "success" 일 경우
Server -> Client : 메세지 전달
else 메세지가 없을 경우
  opt 마지막에 수락한 회원일 경우
  Server -> Redis : match에 해당 팀 정보 요청
  activate Redis
  Redis -> Server : match에 해당 팀 정보 전달
  deactivate Redis
    loop N < match 사이즈
      opt match에 있지만 accept에는 없는 회원일 경우
          Server -> Redis : position에 해당 회원 정보 삭제
        Server -> Redis : match 및 matchAll에 해당 회원 정보 삭제
      end
    end
  Server -> Redis : accept 팀정보 삭제 및 acceptTime 팀 수락시간 정보 삭제
  end
  Server - -> Server : fail 메세지 생성
end

Server -> Client : 메세지 전달
deactivate Server
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>